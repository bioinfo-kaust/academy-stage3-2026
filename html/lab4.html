<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 4: Alignment & Quantification - Bioinformatics 2026</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">Bioinformatics Specialization Program - KAUST Academy</a>
            <button class="nav-toggle" onclick="toggleNav()">&#9776;</button>
            <ul id="nav-menu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="schedule.html">Schedule</a></li>
                <li><a href="labs.html" class="active">Labs</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="setup.html">Setup</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <h1>Lab 4: Alignment & Quantification</h1>

        <div class="info-box warning">
            <strong>Choose Your Path</strong>
            <p>Lab 4 has two options. Complete either Lab 4a or Lab 4b (not both). Both paths produce the same output files needed for Lab 5.</p>
        </div>

        <section>
            <h2>Which approach should I use?</h2>
            <div class="card-grid">
                <div class="card lab-card">
                    <span class="tag">Lab 4a</span>
                    <h3>Genome Alignment (STAR + Salmon)</h3>
                    <p><strong>Choose this if you need:</strong></p>
                    <ul>
                        <li>BAM files for visualization in IGV</li>
                        <li>Read-level mapping information</li>
                        <li>Splice junction analysis</li>
                        <li>Integration with variant calling</li>
                        <li>Full understanding of the traditional RNA-seq workflow</li>
                    </ul>
                    <div class="info-box note">
                        <strong>Requirements:</strong> ~4 GB RAM (chr11 only), longer processing time
                    </div>
                    <div class="tools-list">
                        <span class="tool-tag">STAR</span>
                        <span class="tool-tag">Salmon</span>
                        <span class="tool-tag">samtools</span>
                        <span class="tool-tag">IGV</span>
                    </div>
                    <a href="lab4a.html">Start Lab 4a &rarr;</a>
                </div>

                <div class="card lab-card">
                    <span class="tag">Lab 4b</span>
                    <h3>Pseudo-alignment (Salmon Only)</h3>
                    <p><strong>Choose this if you:</strong></p>
                    <ul>
                        <li>Only need gene expression counts</li>
                        <li>Want faster processing</li>
                        <li>Have limited computational resources</li>
                        <li>Don't need BAM files</li>
                        <li>Want to learn modern lightweight quantification</li>
                    </ul>
                    <div class="info-box note">
                        <strong>Requirements:</strong> ~2 GB RAM, 10-100x faster than STAR
                    </div>
                    <div class="tools-list">
                        <span class="tool-tag">Salmon</span>
                        <span class="tool-tag">tximport</span>
                        <span class="tool-tag">R</span>
                    </div>
                    <a href="lab4b.html">Start Lab 4b &rarr;</a>
                </div>
            </div>
        </section>

        <section>
            <h2>Comparison Table</h2>
            <div class="card">
                <table class="schedule-table">
                    <tr>
                        <th>Feature</th>
                        <th>Lab 4a (STAR + Salmon)</th>
                        <th>Lab 4b (Salmon Only)</th>
                    </tr>
                    <tr>
                        <td>Processing speed</td>
                        <td>Slower (alignment step)</td>
                        <td>10-100x faster</td>
                    </tr>
                    <tr>
                        <td>Memory required</td>
                        <td>~4 GB (chr11 only)</td>
                        <td>~2 GB</td>
                    </tr>
                    <tr>
                        <td>BAM files</td>
                        <td>Yes</td>
                        <td>No</td>
                    </tr>
                    <tr>
                        <td>IGV visualization</td>
                        <td>Yes</td>
                        <td>No</td>
                    </tr>
                    <tr>
                        <td>Gene counts for DESeq2</td>
                        <td>Yes</td>
                        <td>Yes</td>
                    </tr>
                    <tr>
                        <td>Splice junction info</td>
                        <td>Yes</td>
                        <td>No</td>
                    </tr>
                    <tr>
                        <td>Best for</td>
                        <td>Full analysis, visualization</td>
                        <td>Quick DE analysis</td>
                    </tr>
                </table>
            </div>
        </section>

        <section>
            <h2>Recommendation</h2>
            <div class="info-box tip">
                <strong>For this workshop:</strong>
                <p>If you're new to RNA-seq analysis, we recommend <strong>Lab 4a</strong> to learn the full workflow including genome alignment and BAM file inspection. The experience of visualizing reads in IGV is valuable for understanding how RNA-seq works.</p>
                <p>If you're short on time or already familiar with alignment concepts, <strong>Lab 4b</strong> will get you to the differential expression analysis faster.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>Bioinformatics Specialization Program 2026 - KAUST Academy</p>
    </footer>

    <script>
        function toggleNav() {
            document.getElementById('nav-menu').classList.toggle('show');
        }

        // Add copy buttons to all code blocks
        document.addEventListener('DOMContentLoaded', function() {
            const codeBlocks = document.querySelectorAll('pre');
            codeBlocks.forEach(function(pre) {
                const container = document.createElement('div');
                container.className = 'code-container';
                pre.parentNode.insertBefore(container, pre);
                container.appendChild(pre);

                const copyBtn = document.createElement('button');
                copyBtn.className = 'copy-btn';
                copyBtn.textContent = 'Copy';
                copyBtn.addEventListener('click', function() {
                    const code = pre.querySelector('code');
                    const text = code ? code.textContent : pre.textContent;
                    navigator.clipboard.writeText(text).then(function() {
                        copyBtn.textContent = 'Copied!';
                        copyBtn.classList.add('copied');
                        setTimeout(function() {
                            copyBtn.textContent = 'Copy';
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    });
                });
                container.appendChild(copyBtn);
            });
        });
    </script>
</body>
</html>
